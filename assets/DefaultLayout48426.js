import{_ as z,b as i,e as a,d as G,o as B,C as ao,m as g,u as to,D as R,c as D,E as J,x as co,r as p,g as o,f as u,w as O,G as T,s as x,h as $,n as L,B as ro,a as K,i as m,H as _o,p as mo,v as eo,I as uo}from"../index48426.js";import{_ as po,c as Q,a as j,F as X}from"./vee-validate.esm48426.js";import{u as P,b as H,a as so}from"./formatData48426.js";import{u as Z}from"./user48426.js";import{I as oo}from"./InputTextWithValidation48426.js";import{a as F,e as N,f as W,t as fo}from"./helpers48426.js";import{u as vo}from"./coupon48426.js";import{u as ho}from"./order48426.js";const bo={},yo={src:po,alt:"Logo"};function go(s,t){return i(),a("img",yo)}const Do=z(bo,[["render",go]]),So=G({setup(){B(()=>{U(),window.addEventListener("scroll",k)}),ao(()=>{window.removeEventListener("scroll",k)});const s=g(),t=to(),l=g(),e=g(),b=g(),v=g(),n=R(),_=g(!1),d=g([{label:"Anagrafica utenti",icon:"pi pi-users",to:"/utenti"},{label:"Prenotazioni",icon:"pi pi-file",to:"/prenotazioni"},{label:"Ordini",icon:"pi pi-cart-plus",to:"/ordini"},{label:"Coupon",icon:"pi pi-ticket",to:"/coupon"}]),c=D(()=>t.isUserSuperAdmin),h=D(()=>t.currentUser),f=D(()=>t.loggedIn),r=function(V){b.value.toggle(V)},w=function(){t.logout()},U=function(){if(h.value&&h.value.full_name){var V=h.value.full_name.split(" ");V.length>1?e.value=V[0].charAt(0)+V[1].charAt(0):e.value=h.value.full_name.charAt(0)}},k=function(){_.value=window.scrollY>0};return J(n,()=>{U()}),co(async()=>{}),{selectedCountry:s,items:d,menu:l,initials:e,op:b,showSelectCountry:v,isScrolled:_,route:n,isSuperAdmin:c,currentUser:h,loggedIn:f,toggle:r,logout:w}},components:{LogoTopbar:Do}});const wo={class:"container flex py-2"},xo={class:"col-6 flex align-items-center p-0"},Vo={class:"col-6 flex justify-content-end m-0 px-0"},ko=o("i",{class:"pi pi-sign-out mr-2"},null,-1),Co=o("div",null,null,-1);function To(s,t,l,e,b,v){const n=p("LogoTopbar"),_=p("router-link"),d=p("Menubar"),c=p("Avatar"),h=p("OverlayPanel");return i(),a("div",{class:L(["topbar",{scrolled:s.isScrolled}])},[o("div",wo,[o("div",xo,[u(_,{to:"/",class:"mr-6"},{default:O(()=>[u(n,{class:"h-2rem"})]),_:1}),u(d,{model:s.items,class:"mr-2 py-0"},null,8,["model"])]),o("div",Vo,[s.currentUser?(i(),a("div",{key:0,class:"flex ml-2 text-color align-items-center cursor-pointer",onClick:t[0]||(t[0]=(...f)=>s.toggle&&s.toggle(...f))},[s.initials?(i(),T(c,{key:0,shape:"circle",label:s.initials},null,8,["label"])):(i(),T(c,{key:1,shape:"circle",icon:"pi pi-user"}))])):x("",!0),u(h,{ref:"op"},{default:O(()=>[o("p",{onClick:t[1]||(t[1]=(...f)=>s.logout&&s.logout(...f))},[ko,$("Logout")])]),_:1},512)])]),Co],2)}const Uo=z(So,[["render",To]]),q=ro({id:"dynamicDialog",state:()=>({_showDynamicDialog:!1,_title:"",_btnYesLabel:"",_btnNoLabel:"",_message:"",_btnSubmit:!1}),getters:{showDynamicDialog:s=>s._showDynamicDialog,title:s=>s._title,submitDialog:s=>s._btnSubmit},actions:{setDynamicDialogVisibility(s){this.updateDynamicDialog(s)},updateDynamicDialog(s){this._showDynamicDialog=s,s||this.clearDynamicDialog()},setDialog(s,t,l,e){this._title=s,this._btnNoLabel=l,this._btnYesLabel=t,this._message=e},setBtnSubmit(s){this._btnSubmit=s},clearDynamicDialog(){}}}),Io={props:["user_id","detail"],setup(s){B(()=>{s.user_id&&U(s.user_id)});const t=g([{label:""}]),l=g({}),e=g(),b=g(!0);R();const v=K(),n=Z(),_=q(),d=P(),c=Q({company:j().required()}),h=D(()=>n.getCurrentUser),f=D(()=>n.allUsers),r=D(()=>_.submitDialog),w=D(()=>n.getCurrentUser),U=async function(y){n.fetchUserDetail(y).then(()=>{V()}).catch(C=>{})},k=async function(){const y=new Map;await n.fetchAllUsers(y).catch(C=>{})},V=function(){l.value=Object.assign({},h.value)},I=function(){const y=w.value.id;y&&n.deleteUser(y).then(()=>{F(v,{message:"L'utente è stato disattivato",error:!1}),d.updateSidebar(!1),k()}).catch(C=>{N(v,C)})};return J(r,y=>{I()}),{items:t,tmp_user:l,filteredUsers:e,allUsers:f,schema:c,flag:b,fetchAllUsers:k}},components:{InputTextWithValidation:oo,Form:X}};const Ao={key:0,class:"user"},$o={class:"formgrid grid mt-3"},zo={class:"col-12 pl-0"},Oo={class:"flex align-items-center"},Lo=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-user"})],-1),Fo={class:"field col-11"},No=o("label",{for:"name"},"Nome",-1),Bo={class:"flex align-items-center"},qo=o("div",{class:"col-1"},null,-1),Mo={class:"field col-11"},Eo=o("label",{for:"last_name"},"Cognome",-1),jo={class:"flex align-items-center"},Ro=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-envelope"})],-1),Po={class:"field col-11"},Yo=o("label",{for:"email"},"Email",-1),Ho={class:"flex align-items-center"},Wo=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-phone"})],-1),Go={class:"field col-11"},Jo=o("label",{for:"phone"},"Phone",-1),Ko={key:0,class:"m-0"},Qo={key:1,class:"m-0"},Xo={class:"flex flex-column justify-content-center gap-1 mt-3 ml-5"},Zo={class:"flex align-items-center field col-11"},oe=o("label",{for:"privacy_artt",class:"ml-2"}," Approvazione espressa ex artt. 1341 e 1342 c.c. ",-1),ee={class:"flex align-items-center field col-11"},te=o("label",{for:"privacy_promo",class:"ml-2"}," Desidero essere informato su promozioni e novità ",-1),se={class:"flex align-items-center field col-11"},le=o("label",{for:"privacy_promo_others",class:"ml-2"}," Accetto di ricevere materiale informativo e promozionale relativo a prodotti e servizi terzi ",-1);function ie(s,t,l,e,b,v){const n=p("InputText"),_=p("Checkbox"),d=p("Button");return e.tmp_user?(i(),a("div",Ao,[o("div",$o,[o("div",zo,[o("div",Oo,[Lo,o("div",Fo,[No,u(n,{id:"name",type:"text",modelValue:e.tmp_user.first_name,"onUpdate:modelValue":t[0]||(t[0]=c=>e.tmp_user.first_name=c),class:"w-full",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"])])]),o("div",Bo,[qo,o("div",Mo,[Eo,u(n,{id:"last_name",type:"text",modelValue:e.tmp_user.last_name,"onUpdate:modelValue":t[1]||(t[1]=c=>e.tmp_user.last_name=c),class:"w-full",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"])])]),o("div",jo,[Ro,o("div",Po,[Yo,u(n,{id:"email",type:"text",modelValue:e.tmp_user.email,"onUpdate:modelValue":t[2]||(t[2]=c=>e.tmp_user.email=c),class:"w-full",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"])])]),o("div",Ho,[Wo,o("div",Go,[Jo,e.tmp_user.phone_number?(i(),a("p",Ko,"+ "+m(e.tmp_user.prefix_number)+" "+m(e.tmp_user.phone_number),1)):(i(),a("p",Qo," - "))])]),o("div",Xo,[o("div",Zo,[u(_,{modelValue:e.tmp_user.privacy_artt_1341_1342,"onUpdate:modelValue":t[3]||(t[3]=c=>e.tmp_user.privacy_artt_1341_1342=c),name:"privacy_artt",binary:!0,disabled:""},null,8,["modelValue"]),oe]),o("div",ee,[u(_,{name:"privacy_promo",modelValue:e.tmp_user.privacy_promo,"onUpdate:modelValue":t[4]||(t[4]=c=>e.tmp_user.privacy_promo=c),binary:!0,disabled:""},null,8,["modelValue"]),te]),o("div",se,[u(_,{inputId:"privacy_promo_others",name:"privacy_promo_others",modelValue:e.tmp_user.privacy_promo_others,"onUpdate:modelValue":t[5]||(t[5]=c=>e.tmp_user.privacy_promo_others=c),binary:!0,disabled:""},null,8,["modelValue"]),le])])])]),u(d,{type:"submit",class:"hidden",id:"btn-submit"})])):x("",!0)}const ne=z(Io,[["render",ie]]),ae={props:["coupon_id","detail"],setup(s){B(()=>{s.coupon_id?V(s.coupon_id):(l.value.quantity=1,l.value.quantity_per_user=1),y()});const t=g([{label:""}]),l=g({}),e=g(),b=g(!0);R();const v=K(),n=vo(),_=q(),d=P(),c=Z(),h=Q({code:j().required("Codice è un campo obbligatorio"),amount:j().required("Prezzo è un campo obbligatorio")}),f=D(()=>n.getCurrentCoupon),r=D(()=>n.allCoupons),w=D(()=>_.submitDialog),U=D(()=>n.getCurrentCoupon),k=D(()=>c.allUsers),V=async function(S){n.fetchCouponDetail(S).then(()=>{C()}).catch(A=>{})},I=async function(){const S=new Map;await n.fetchAllCoupons(S).catch(A=>{})},y=async function(){const S=new Map;await c.fetchAllUsers(S).catch(A=>{})},C=function(){l.value=Object.assign({},f.value),l.value.valid_to=H(f.value.valid_to+""),l.value.valid_from=H(f.value.valid_from+"")},M=function(){const S=U.value.id;S&&n.deleteCoupon(S).then(()=>{F(v,{message:"Il coupon è stato eliminato",error:!1}),d.updateSidebar(!1),I()}).catch(A=>{N(v,A)})},Y=async function(S,A){const E=Object.assign({},l.value);E.code=S.code,E.amount=S.amount,l.value.id?no(E):io(E)},lo=async function(){var S;(S=document.getElementById("btn-submit"))==null||S.click()},io=async function(S){await n.createCoupon(S).then(A=>{F(v,{message:"Coupon aggiunto con successo",error:!1}),d.updateSidebar(!1),I()}).catch(A=>{N(v,A)})},no=async function(S){await n.updateCoupon(S).then(A=>{F(v,{message:"Coupon aggiornato con successo",error:!1}),d.updateSidebar(!1),I()}).catch(A=>{N(v,A)})};return J(w,S=>{M()}),{items:t,tmp_coupon:l,filteredCoupons:e,allCoupons:r,schema:h,flag:b,couponStore:n,users:k,fetchAllCoupons:I,formatDataFromUnixTimestamps:so,formatNumber:W,formatDataFromSql:H,save:lo,onSubmit:Y}},components:{InputTextWithValidation:oo,Form:X}};const ce={key:0,class:"coupon"},de={class:"formgrid grid mt-3"},re={class:"col-12 pl-0"},_e={class:"flex top mt-1"},me=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-coupon"})],-1),ue={class:"field col-11 mb-0"},pe={class:"flex top mt-1"},fe=o("div",{class:"col-1"},null,-1),ve={class:"field col-11"},he=o("label",{for:"last_name"},"Tipologia",-1),be={key:1,class:"m-0 capitalize"},ye={class:"flex top mt-1"},ge=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-euro"})],-1),De={key:1},Se={key:0,class:"m-0 field flex flex-column"},we=o("label",null," Importo",-1),xe={key:1,class:"m-0"},Ve={class:"flex top mt-1"},ke=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-calendar"})],-1),Ce={class:"field col-11"},Te=o("label",{for:"calendar"},"Valido dal",-1),Ue={key:1},Ie={class:"flex top mt-1"},Ae=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-calendar"})],-1),$e={class:"field col-11"},ze=o("label",{for:"calendar"},"Al",-1),Oe={key:1},Le={key:0,class:"flex top mt-1"},Fe=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-ticket"})],-1),Ne={class:"field col-11 flex flex-column"},Be=o("label",{for:"quantity"},"Numero totale coupon",-1),qe={key:1,class:"flex top mt-1"},Me=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-ticket"})],-1),Ee={class:"field col-11 flex flex-column"},je=o("label",{for:"quantity_per_user"},"Numero coupon utilizzabili per singolo utente",-1),Re={key:2,class:"flex top mt-1"},Pe=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-user"})],-1),Ye={class:"field col-11"},He=o("label",{for:"limit_to_user_id"},"Coupon valido per l'utente",-1),We={key:1,class:"m-0"};function Ge(s,t,l,e,b,v){const n=p("InputTextWithValidation"),_=p("Dropdown"),d=p("Calendar"),c=p("InputText"),h=p("Button"),f=p("Form");return e.tmp_coupon?(i(),a("div",ce,[u(f,{"validation-schema":e.schema,class:"flex flex-column",onSubmit:e.onSubmit},{default:O(()=>[o("div",de,[o("div",re,[o("div",_e,[me,o("div",ue,[u(n,{name:"code",label:"Codice*",modelValue:e.tmp_coupon.code,class:"w-full",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"])])]),o("div",pe,[fe,o("div",ve,[he,l.detail?(i(),a("p",be,[o("span",null,m(e.tmp_coupon.typology||"-"),1),o("div",{class:L(["circle",e.tmp_coupon.typology])},null,2)])):(i(),T(_,{key:0,id:"last_name",modelValue:e.tmp_coupon.typology,"onUpdate:modelValue":t[0]||(t[0]=r=>e.tmp_coupon.typology=r),options:e.couponStore.couponsTypology,optionLabel:"name",optionValue:"value",class:"w-full capitalize"},null,8,["modelValue","options"]))])]),o("div",ye,[ge,o("div",{class:L(["field col-11",{"mb-0":!l.detail}])},[l.detail?(i(),a("div",De,[e.tmp_coupon.amount?(i(),a("p",Se,[we,$(" "+m(e.formatNumber(+e.tmp_coupon.amount)+"")+" € ",1)])):(i(),a("p",xe,"-"))])):(i(),T(n,{key:0,name:"amount",label:"Importo*",modelValue:e.tmp_coupon.amount,class:"w-full",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"]))],2)]),o("div",Ve,[ke,o("div",Ce,[Te,l.detail?(i(),a("div",Ue,[o("span",null,m(e.tmp_coupon.valid_from||"-"),1)])):(i(),T(d,{key:0,inputId:"calendar",modelValue:e.tmp_coupon.valid_from,"onUpdate:modelValue":t[1]||(t[1]=r=>e.tmp_coupon.valid_from=r),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:"gg/mm/aaaa"},null,8,["modelValue"]))])]),o("div",Ie,[Ae,o("div",$e,[ze,l.detail?(i(),a("div",Oe,[o("span",null,m(e.tmp_coupon.valid_to||"-"),1)])):(i(),T(d,{key:0,inputId:"calendar",modelValue:e.tmp_coupon.valid_to,"onUpdate:modelValue":t[2]||(t[2]=r=>e.tmp_coupon.valid_to=r),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:"gg/mm/aaaa"},null,8,["modelValue"]))])]),e.tmp_coupon.typology=="promo"?(i(),a("div",Le,[Fe,o("div",Ne,[Be,u(c,{id:"quantity",modelValue:e.tmp_coupon.quantity,"onUpdate:modelValue":t[3]||(t[3]=r=>e.tmp_coupon.quantity=r),type:"number",min:"1"},null,8,["modelValue"])])])):x("",!0),e.tmp_coupon.typology=="promo"?(i(),a("div",qe,[Me,o("div",Ee,[je,u(c,{id:"quantity_per_user",modelValue:e.tmp_coupon.quantity_per_user,"onUpdate:modelValue":t[4]||(t[4]=r=>e.tmp_coupon.quantity_per_user=r),type:"number",min:"1"},null,8,["modelValue"])])])):x("",!0),e.tmp_coupon.typology=="rimborso"?(i(),a("div",Re,[Pe,o("div",Ye,[He,l.detail?(i(),a("p",We,m(e.tmp_coupon.limit_to_user.email||"-"),1)):(i(),T(_,{key:0,modelValue:e.tmp_coupon.limit_to_user_id,"onUpdate:modelValue":t[5]||(t[5]=r=>e.tmp_coupon.limit_to_user_id=r),options:e.users,optionLabel:"email",optionValue:"id",class:"w-full"},null,8,["modelValue","options"]))])])):x("",!0)])]),u(h,{type:"submit",class:"hidden",id:"btn-submit",label:"Salva"})]),_:1},8,["validation-schema","onSubmit"])])):x("",!0)}const Je=z(ae,[["render",Ge]]),Ke={props:["order_id","detail"],setup(s){B(()=>{s.order_id&&r(s.order_id)});const t=g([{label:""}]),l=g({}),e=g(),b=g(!0);R();const v=K(),n=ho(),_=q(),d=P(),c=Q({company:j().required()}),h=D(()=>n.getCurrentOrder),f=D(()=>n.allOrders);D(()=>_.submitDialog),D(()=>n.getCurrentOrder);const r=async function(y){n.fetchOrderDetail(y).then(()=>{U()}).catch(C=>{})},w=async function(){const y=new Map;await n.fetchAllOrders(y).catch(C=>{})},U=function(){l.value=Object.assign({},h.value)},k=function(){if(l.value.amount&&l.value.discount_amount){let y=parseFloat(l.value.amount)-parseFloat(l.value.discount_amount);return y>0?W(y):0}},V=async function(){debugger;if(l.value.invoice_number){let y={id:l.value.id+"",invoice_number:l.value.invoice_number};I(y)}},I=async function(y){await n.updateInvoiceNumber(y).then(()=>{F(v,{message:"Numero fattura aggiornato con successo",error:!1}),d.updateSidebar(!1),w()}).catch(C=>{N(v,C)})};return{items:t,tmp_order:l,filteredOrders:e,allOrders:f,schema:c,flag:b,fetchAllOrders:w,formatDataFromUnixTimestamps:so,translateTypology:fo,getTotal:k,formatNumber:W,save:V}},components:{InputTextWithValidation:oo,Form:X}};const Qe={key:0,class:"order"},Xe={class:"formgrid grid mt-3"},Ze={class:"col-12 pl-0"},ot={class:"flex top mt-1"},et=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-calendar"})],-1),tt={class:"field col-11"},st=o("label",null,"Data ordine",-1),lt={key:0,class:"m-0"},it={key:1,class:"m-0"},nt={class:"col-12 pl-0"},at={class:"flex top mt-1"},ct=o("div",{class:"col-1"},null,-1),dt={class:"field col-11"},rt=o("label",null,"Tipologia",-1),_t=o("br",null,null,-1),mt={key:0,class:"m-0"},ut={key:1},pt={class:"col-12 pl-0"},ft={class:"flex top mt-1"},vt=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-user"})],-1),ht={class:"field col-11"},bt=o("label",null,"Utente",-1),yt={class:"m-0"},gt={class:"col-12 pl-0"},Dt={class:"flex top mt-1"},St=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-building"})],-1),wt={class:"col-11 flex justify-content-between align-items-center"},xt={class:"field"},Vt=o("label",null,"Area di lavoro",-1),kt=o("br",null,null,-1),Ct={key:0},Tt={key:1,class:"m-0"},Ut={class:"col-12 pl-0"},It={class:"flex top mt-1"},At=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-ticket"})],-1),$t={class:"field col-11"},zt=o("label",null,"Coupon",-1),Ot={key:0,class:"m-0 capitalize"},Lt={key:1,class:"m-0"},Ft=_o('<div class="col-12 pl-0 mb-1"><div class="flex top mt-1"><div class="col-1"><i class="mt-1 pi pi-money-bill"></i></div><div class="field col-11 mb-0"><label>Dettaglio pagamento:</label></div></div></div>',1),Nt={class:"ml-5"},Bt={class:"col-12 p-0"},qt={class:"flex top mt-1"},Mt=o("div",{class:"col-5"},[o("label",null,"Totale:")],-1),Et={class:"col-7"},jt={key:0,class:"ml-2"},Rt={class:"col-12 p-0"},Pt={class:"flex top mt-1"},Yt=o("div",{class:"col-5"},[o("label",null,"Sconto coupon:")],-1),Ht={class:"col-7"},Wt={key:0,class:"ml-2"},Gt={class:"col-12 p-0"},Jt={class:"flex top mt-1"},Kt=o("div",{class:"col-5"},[o("label",null,"Totale pagato:")],-1),Qt={class:"col-7"},Xt={class:"ml-2 font-bold"},Zt={class:"col-12 pl-0 mt-4"},os={class:"flex top mt-1"},es=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-credit-card"})],-1),ts={class:"field col-11"},ss=o("label",null,"Metodo di pagamento",-1),ls={class:"m-0 capitalize"},is={key:0,class:"col-12 pl-0"},ns={class:"flex top mt-1"},as=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-file"})],-1),cs={class:"field col-11"},ds=o("label",null,"Fattura",-1),rs={class:"m-0 line-height-3"},_s=o("br",null,null,-1),ms=o("br",null,null,-1),us=o("br",null,null,-1),ps=o("br",null,null,-1),fs=o("br",null,null,-1),vs={key:1,class:"col-12 pl-0"},hs={class:"flex top mt-1"},bs=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-file"})],-1),ys={class:"field col-11"},gs=o("label",null,"Scontrino fiscale",-1),Ds={class:"m-0 line-height-3"},Ss=o("br",null,null,-1),ws=o("br",null,null,-1),xs=o("br",null,null,-1),Vs=o("br",null,null,-1),ks={key:2,class:"col-12 pl-0 mt-1"},Cs={class:"flex top mt-1"},Ts=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-file"})],-1),Us={class:"field col-11 flex flex-column"},Is=o("label",{for:"invoice_number"},"Numero fattura",-1);function As(s,t,l,e,b,v){var _,d,c,h,f,r,w,U,k,V,I,y,C,M;const n=p("InputText");return e.tmp_order?(i(),a("div",Qe,[o("div",Xe,[o("div",Ze,[o("div",ot,[et,o("div",tt,[st,e.tmp_order.created_at?(i(),a("p",lt,m(e.formatDataFromUnixTimestamps(e.tmp_order.created_at)),1)):(i(),a("p",it,"-"))])]),o("div",nt,[o("div",at,[ct,o("div",dt,[rt,_t,e.tmp_order.typology?(i(),a("span",mt,m(e.translateTypology(e.tmp_order.typology)),1)):(i(),a("span",ut,"-"))])]),o("div",pt,[o("div",ft,[vt,o("div",ht,[bt,o("p",yt,m(((_=e.tmp_order.user)==null?void 0:_.email)||"-"),1)])])]),o("div",gt,[o("div",Dt,[St,o("div",wt,[o("div",xt,[Vt,kt,e.tmp_order.workarea?(i(),a("span",Ct,m(e.tmp_order.workarea.name),1)):(i(),a("p",Tt,"-"))]),o("div",{class:L(["circle",(c=(d=e.tmp_order)==null?void 0:d.workarea)==null?void 0:c.typology])},null,2)])])]),o("div",Ut,[o("div",It,[At,o("div",$t,[zt,e.tmp_order.coupon_code?(i(),a("p",Ot,m(e.tmp_order.coupon_code),1)):(i(),a("p",Lt,"-"))])])]),Ft,o("div",Nt,[o("div",Bt,[o("div",qt,[Mt,o("div",Et,[e.tmp_order.amount?(i(),a("span",jt," € "+m(e.formatNumber(+e.tmp_order.amount)),1)):x("",!0)])])]),o("div",Rt,[o("div",Pt,[Yt,o("div",Ht,[e.tmp_order.discount_amount?(i(),a("span",Wt," € "+m(e.formatNumber(+e.tmp_order.discount_amount)),1)):x("",!0)])])]),o("div",Gt,[o("div",Jt,[Kt,o("div",Qt,[o("span",Xt,"€ "+m(e.getTotal()),1)])])])]),o("div",Zt,[o("div",os,[es,o("div",ts,[ss,o("p",ls,m(e.tmp_order.payment_method||"-"),1)])])]),(h=e.tmp_order.invoice_data)!=null&&h.company_name?(i(),a("div",is,[o("div",ns,[as,o("div",cs,[ds,o("p",rs,[$(m((f=e.tmp_order.invoice_data)==null?void 0:f.company_name)+" ",1),_s,$(" "+m((r=e.tmp_order.invoice_data)==null?void 0:r.company_vat),1),ms,$(" "+m((w=e.tmp_order.invoice_data)==null?void 0:w.company_address),1),us,$(" "+m((U=e.tmp_order.invoice_data)==null?void 0:U.company_email),1),ps,$(" "+m((k=e.tmp_order.invoice_data)==null?void 0:k.company_sdi),1),fs])])])])):(i(),a("div",vs,[o("div",hs,[bs,o("div",ys,[gs,o("p",Ds,[$(m((V=e.tmp_order.invoice_data)==null?void 0:V.person_fullname)+" ",1),Ss,$(" "+m((I=e.tmp_order.invoice_data)==null?void 0:I.person_fiscal_code),1),ws,$(" "+m((y=e.tmp_order.invoice_data)==null?void 0:y.person_address),1),xs,$(" "+m((C=e.tmp_order.invoice_data)==null?void 0:C.person_email),1),Vs])])])])),(M=e.tmp_order.invoice_data)!=null&&M.company_name?(i(),a("div",ks,[o("div",Cs,[Ts,o("div",Us,[Is,u(n,{id:"invoice_number",modelValue:e.tmp_order.invoice_number,"onUpdate:modelValue":t[0]||(t[0]=Y=>e.tmp_order.invoice_number=Y),type:"text",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"])])])])):x("",!0)])])])])):x("",!0)}const $s=z(Ke,[["render",As]]),zs={props:["type"],setup(){const s=g(),t=g(),l=g(),e=P(),b=q(),v=Z(),n=D(()=>e.showSidebar);D(()=>v.getCurrentUser);const _=function(w){e.setShowDetail(w)},d=function(){e.updateSidebar(!1)},c=function(){e.detailType=="user"?s.value.save():e.detailType=="coupon"?t.value.save():e.detailType=="order"&&l.value.save()},h=function(){let w="Vuoi disiscrivere l’utente da <b>Travaj</b>?<br>Ricordati di annullare tutte le prenotazioni attive dell’utente.";b.setDialog("Disiscrivi l'utente","Conferma","Annulla",w),b.setDynamicDialogVisibility(!0)},f=function(){let w="Sei sicuro di voler eliminare questo coupon?";b.setDialog("Elimina coupon","Conferma","Annulla",w),b.setDynamicDialogVisibility(!0)};return{showSidebar:n,sidebarStore:e,userDetailView:s,couponDetailView:t,orderDetailView:l,toggleEdit:_,closeSidebar:d,saveData:c,callDelete:function(){e.detailType=="user"?h():e.detailType=="coupon"&&f()}}},components:{UserDetailView:ne,CouponDetailView:Je,OrderDetailView:$s}},Os={class:"flex align-items-center justify-content-between"},Ls={class:"m-0"},Fs={key:0,class:"flex align-items-center"},Ns=o("span",{class:"pi pi-pencil"},null,-1),Bs=[Ns],qs=o("span",{class:"pi pi-trash"},null,-1),Ms=[qs],Es=o("span",{class:"pi pi-times"},null,-1),js=[Es],Rs={key:1,class:"flex align-items-center"};function Ps(s,t,l,e,b,v){const n=p("Button"),_=p("UserDetailView"),d=p("CouponDetailView"),c=p("OrderDetailView"),h=p("Sidebar"),f=mo("tooltip");return i(),T(h,{visible:e.showSidebar,"onUpdate:visible":t[5]||(t[5]=r=>e.showSidebar=r),position:"right",class:"w-full md:w-20rem lg:w-30rem",showCloseIcon:!1,dismissable:!0},{header:O(()=>[o("div",Os,[o("h2",Ls,m(e.sidebarStore.title),1),e.sidebarStore.showDetail?(i(),a("div",Rs,[u(n,{label:"Annulla",text:"",rounded:"",class:"mr-3",size:"small",onClick:t[3]||(t[3]=r=>e.toggleEdit(!1))}),u(n,{label:"Salva",outlined:"",rounded:"",size:"small",onClick:t[4]||(t[4]=r=>e.saveData())})])):(i(),a("div",Fs,[!e.sidebarStore.showDetail&&e.sidebarStore.detailType!="user"?eo((i(),a("button",{key:0,class:"p-sidebar-icon p-link mr-2",onClick:t[0]||(t[0]=r=>e.toggleEdit(!0))},Bs)),[[f,"Modifica",void 0,{top:!0}]]):x("",!0),!e.sidebarStore.showDetail&&e.sidebarStore.detailType!="order"?eo((i(),a("button",{key:1,class:"p-sidebar-icon p-link mr-2",onClick:t[1]||(t[1]=r=>e.callDelete())},Ms)),[[f,"Elimina",void 0,{top:!0}]]):x("",!0),o("button",{class:"p-sidebar-icon p-link mr-2",onClick:t[2]||(t[2]=r=>e.closeSidebar())},js)]))])]),default:O(()=>[e.sidebarStore.detailType=="user"?(i(),T(_,{key:0,user_id:e.sidebarStore.typeId,class:L({detail:!e.sidebarStore.showDetail}),detail:!e.sidebarStore.showDetail,ref:"userDetailView"},null,8,["user_id","class","detail"])):x("",!0),e.sidebarStore.detailType=="coupon"?(i(),T(d,{key:1,coupon_id:e.sidebarStore.typeId,class:L({detail:!e.sidebarStore.showDetail}),detail:!e.sidebarStore.showDetail,ref:"couponDetailView"},null,8,["coupon_id","class","detail"])):x("",!0),e.sidebarStore.detailType=="order"?(i(),T(c,{key:2,order_id:e.sidebarStore.typeId,class:L({detail:!e.sidebarStore.showDetail}),detail:!e.sidebarStore.showDetail,ref:"orderDetailView"},null,8,["order_id","class","detail"])):x("",!0)]),_:1},8,["visible"])}const Ys=z(zs,[["render",Ps]]),Hs=G({setup(){B(()=>{t.value="0.0.47"});const s=to(),t=g();return{loggedIn:D(()=>s.loggedIn),appVersion:t}}}),Ws={key:0,class:"footer py-1 px-3 text-right"};function Gs(s,t,l,e,b,v){return s.loggedIn?(i(),a("div",Ws," v."+m(s.appVersion),1)):x("",!0)}const Js=z(Hs,[["render",Gs]]),Ks={setup(){const s=q(),t=D(()=>s.showDynamicDialog),l=function(b){s.setDynamicDialogVisibility(b)};return{visible:t,toggleVisibility:l,dynamicDialogStore:s,onSubmit:function(){s.setBtnSubmit(!0),l(!1)}}}};const Qs={class:"flex justify-content-between align-items-center w-full"},Xs={class:"m-0"},Zs=["innerHTML"];function ol(s,t,l,e,b,v){const n=p("Button"),_=p("Dialog");return e.dynamicDialogStore?(i(),T(_,{key:0,visible:e.visible,"onUpdate:visible":t[3]||(t[3]=d=>e.visible=d),modal:"",header:e.dynamicDialogStore._title,closable:!1,style:{width:"30vw"},class:"custom-dialog"},{header:O(()=>[o("div",Qs,[o("h2",Xs,m(e.dynamicDialogStore._title),1),u(n,{rounded:"",icon:"pi pi-times",onClick:t[0]||(t[0]=d=>e.toggleVisibility(!1)),text:""})])]),footer:O(()=>[u(n,{label:e.dynamicDialogStore._btnNoLabel,onClick:t[1]||(t[1]=d=>e.toggleVisibility(!1)),outlined:"",rounded:"",size:"small"},null,8,["label"]),u(n,{label:e.dynamicDialogStore._btnYesLabel,onClick:t[2]||(t[2]=d=>e.onSubmit()),autofocus:"",outlined:"",rounded:"",size:"small"},null,8,["label"])]),default:O(()=>[o("div",{innerHTML:e.dynamicDialogStore._message,class:"mt-3 line-height-3"},null,8,Zs)]),_:1},8,["visible","header"])):x("",!0)}const el=z(Ks,[["render",ol]]),tl=G({setup(){},components:{TopbarMenu:Uo,RightSidebar:Ys,Footer:Js,DynamicDialog:el}});const sl={class:"flex"},ll={class:"col-12 p-0"},il={class:"w-full wrapper-content pb-6"},nl={class:"min-h-full pt-0 container pt-3"};function al(s,t,l,e,b,v){const n=p("TopbarMenu"),_=p("RouterView"),d=p("RightSidebar"),c=p("Toast"),h=p("Footer"),f=p("DynamicDialog");return i(),a(uo,null,[o("div",sl,[o("div",ll,[u(n),o("div",il,[o("div",nl,[u(_),u(d)])])]),u(c,{position:"top-right"})]),u(h),u(f)],64)}const vl=z(tl,[["render",al]]);export{vl as default};

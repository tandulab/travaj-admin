import{_ as L,b as i,e as a,d as G,o as B,C as co,m as g,u as to,D as R,c as w,E as J,x as ro,r as _,g as o,f as m,w as O,G as I,s as k,h as z,n as F,B as _o,a as K,i as r,H as mo,p as uo,v as eo,I as po}from"../index87609.js";import{_ as ho,c as Q,a as $,F as X}from"./vee-validate.esm87609.js";import{u as P}from"./sidebar87609.js";import{u as Z}from"./user87609.js";import{I as oo}from"./InputTextWithValidation87609.js";import{a as N,e as q,j as H,d as so,i as W,t as fo}from"./helpers87609.js";import{u as vo}from"./coupon87609.js";import{u as bo}from"./order87609.js";const yo={},go={src:ho,alt:"Logo"};function Do(s,t){return i(),a("img",go)}const So=L(yo,[["render",Do]]),xo=G({setup(){B(()=>{b(),window.addEventListener("scroll",T)}),co(()=>{window.removeEventListener("scroll",T)});const s=g(),t=to(),l=g(),e=g(),v=g(),h=g(),n=R(),u=g(!1),d=g([{label:"Anagrafica utenti",icon:"pi pi-users",to:"/utenti"},{label:"Prenotazioni",icon:"pi pi-file",to:"/prenotazioni"},{label:"Ordini",icon:"pi pi-cart-plus",to:"/ordini"},{label:"Coupon",icon:"pi pi-ticket",to:"/coupon"}]),c=w(()=>t.isUserSuperAdmin),f=w(()=>t.currentUser),p=w(()=>t.loggedIn),S=function(V){v.value.toggle(V)},x=function(){t.logout()},b=function(){if(f.value&&f.value.full_name){var V=f.value.full_name.split(" ");V.length>1?e.value=V[0].charAt(0)+V[1].charAt(0):e.value=f.value.full_name.charAt(0)}},T=function(){u.value=window.scrollY>0};return J(n,()=>{b()}),ro(async()=>{}),{selectedCountry:s,items:d,menu:l,initials:e,op:v,showSelectCountry:h,isScrolled:u,route:n,isSuperAdmin:c,currentUser:f,loggedIn:p,toggle:S,logout:x}},components:{LogoTopbar:So}});const wo={class:"container flex py-2"},ko={class:"col-6 flex align-items-center p-0"},Vo={class:"col-6 flex justify-content-end m-0 px-0"},Co=o("i",{class:"pi pi-sign-out mr-2"},null,-1),To=o("div",null,null,-1);function Uo(s,t,l,e,v,h){const n=_("LogoTopbar"),u=_("router-link"),d=_("Menubar"),c=_("Avatar"),f=_("OverlayPanel");return i(),a("div",{class:F(["topbar",{scrolled:s.isScrolled}])},[o("div",wo,[o("div",ko,[m(u,{to:"/",class:"mr-6"},{default:O(()=>[m(n,{class:"h-2rem"})]),_:1}),m(d,{model:s.items,class:"mr-2 py-0"},null,8,["model"])]),o("div",Vo,[s.currentUser?(i(),a("div",{key:0,class:"flex ml-2 text-color align-items-center cursor-pointer",onClick:t[0]||(t[0]=(...p)=>s.toggle&&s.toggle(...p))},[s.initials?(i(),I(c,{key:0,shape:"circle",label:s.initials},null,8,["label"])):(i(),I(c,{key:1,shape:"circle",icon:"pi pi-user"}))])):k("",!0),m(f,{ref:"op"},{default:O(()=>[o("p",{onClick:t[1]||(t[1]=(...p)=>s.logout&&s.logout(...p))},[Co,z("Logout")])]),_:1},512)])]),To],2)}const Io=L(xo,[["render",Uo]]),M=_o({id:"dynamicDialog",state:()=>({_showDynamicDialog:!1,_title:"",_btnYesLabel:"",_btnNoLabel:"",_message:"",_btnSubmit:!1}),getters:{showDynamicDialog:s=>s._showDynamicDialog,title:s=>s._title,submitDialog:s=>s._btnSubmit},actions:{setDynamicDialogVisibility(s){this.updateDynamicDialog(s)},updateDynamicDialog(s){this._showDynamicDialog=s,s||this.clearDynamicDialog()},setDialog(s,t,l,e){this._title=s,this._btnNoLabel=l,this._btnYesLabel=t,this._message=e},setBtnSubmit(s){this._btnSubmit=s},clearDynamicDialog(){}}}),Ao={props:["user_id","detail"],setup(s){B(()=>{s.user_id&&b(s.user_id)});const t=g([{label:""}]),l=g({}),e=g(),v=g(!0);R();const h=K(),n=Z(),u=M(),d=P(),c=Q({company:$().required()}),f=w(()=>n.getCurrentUser),p=w(()=>n.allUsers),S=w(()=>u.submitDialog),x=w(()=>n.getCurrentUser),b=async function(y){n.fetchUserDetail(y).then(()=>{V()}).catch(U=>{})},T=async function(){const y=new Map;await n.fetchAllUsers(y).catch(U=>{})},V=function(){l.value=Object.assign({},f.value)},A=function(){const y=x.value.id;y&&n.deleteUser(y).then(()=>{N(h,{message:"L'utente è stato disattivato",error:!1}),d.updateSidebar(!1),T()}).catch(U=>{q(h,U)})};return J(S,y=>{A()}),{items:t,tmp_user:l,filteredUsers:e,allUsers:p,schema:c,flag:v,fetchAllUsers:T}},components:{InputTextWithValidation:oo,Form:X}};const zo={key:0,class:"user"},Lo={class:"formgrid grid mt-3"},Oo={class:"col-12 pl-0"},Fo={class:"flex align-items-center"},No=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-user"})],-1),qo={class:"field col-11"},Bo=o("label",{for:"name"},"Nome",-1),Mo={class:"flex align-items-center"},Eo=o("div",{class:"col-1"},null,-1),jo={class:"field col-11"},$o=o("label",{for:"last_name"},"Cognome",-1),Ro={class:"flex align-items-center"},Po=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-envelope"})],-1),Yo={class:"field col-11"},Ho=o("label",{for:"email"},"Email",-1),Wo={class:"flex align-items-center"},Go=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-phone"})],-1),Jo={class:"field col-11"},Ko=o("label",{for:"phone"},"Phone",-1),Qo={key:0,class:"m-0"},Xo={key:1,class:"m-0"},Zo={class:"flex flex-column justify-content-center gap-1 mt-3 ml-5"},oe={class:"flex align-items-center field col-11"},ee=o("label",{for:"privacy_artt",class:"ml-2"}," Approvazione espressa ex artt. 1341 e 1342 c.c. ",-1),te={class:"flex align-items-center field col-11"},se=o("label",{for:"privacy_promo",class:"ml-2"}," Desidero essere informato su promozioni e novità ",-1),le={class:"flex align-items-center field col-11"},ie=o("label",{for:"privacy_promo_others",class:"ml-2"}," Accetto di ricevere materiale informativo e promozionale relativo a prodotti e servizi terzi ",-1);function ne(s,t,l,e,v,h){const n=_("InputText"),u=_("Checkbox"),d=_("Button");return e.tmp_user?(i(),a("div",zo,[o("div",Lo,[o("div",Oo,[o("div",Fo,[No,o("div",qo,[Bo,m(n,{id:"name",type:"text",modelValue:e.tmp_user.first_name,"onUpdate:modelValue":t[0]||(t[0]=c=>e.tmp_user.first_name=c),class:"w-full",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"])])]),o("div",Mo,[Eo,o("div",jo,[$o,m(n,{id:"last_name",type:"text",modelValue:e.tmp_user.last_name,"onUpdate:modelValue":t[1]||(t[1]=c=>e.tmp_user.last_name=c),class:"w-full",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"])])]),o("div",Ro,[Po,o("div",Yo,[Ho,m(n,{id:"email",type:"text",modelValue:e.tmp_user.email,"onUpdate:modelValue":t[2]||(t[2]=c=>e.tmp_user.email=c),class:"w-full",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"])])]),o("div",Wo,[Go,o("div",Jo,[Ko,e.tmp_user.phone_number?(i(),a("p",Qo,"+ "+r(e.tmp_user.prefix_number)+" "+r(e.tmp_user.phone_number),1)):(i(),a("p",Xo," - "))])]),o("div",Zo,[o("div",oe,[m(u,{modelValue:e.tmp_user.privacy_artt_1341_1342,"onUpdate:modelValue":t[3]||(t[3]=c=>e.tmp_user.privacy_artt_1341_1342=c),name:"privacy_artt",binary:!0,disabled:""},null,8,["modelValue"]),ee]),o("div",te,[m(u,{name:"privacy_promo",modelValue:e.tmp_user.privacy_promo,"onUpdate:modelValue":t[4]||(t[4]=c=>e.tmp_user.privacy_promo=c),binary:!0,disabled:""},null,8,["modelValue"]),se]),o("div",le,[m(u,{inputId:"privacy_promo_others",name:"privacy_promo_others",modelValue:e.tmp_user.privacy_promo_others,"onUpdate:modelValue":t[5]||(t[5]=c=>e.tmp_user.privacy_promo_others=c),binary:!0,disabled:""},null,8,["modelValue"]),ie])])])]),m(d,{type:"submit",class:"hidden",id:"btn-submit"})])):k("",!0)}const ae=L(Ao,[["render",ne]]),ce={props:["coupon_id","detail"],setup(s){B(()=>{s.coupon_id?V(s.coupon_id):(l.value.quantity=1,l.value.quantity_per_user=1)});const t=g([]),l=g({}),e=g(),v=g(!0);R();const h=K(),n=vo(),u=M(),d=P(),c=Z(),f=Q({code:$().required("Codice è un campo obbligatorio"),amount:$().required("Prezzo è un campo obbligatorio")}),p=w(()=>n.getCurrentCoupon),S=w(()=>n.allCoupons),x=w(()=>u.submitDialog),b=w(()=>n.getCurrentCoupon),T=w(()=>c.allUsers),V=async function(D){n.fetchCouponDetail(D).then(()=>{U()}).catch(C=>{})},A=async function(){const D=new Map;await n.fetchAllCoupons(D).catch(C=>{})},y=async function(D){await c.fetchAllUsers(D).catch(C=>{})},U=function(){l.value=Object.assign({},p.value),l.value.valid_to=H(p.value.valid_to+""),l.value.valid_from=H(p.value.valid_from+"")},E=function(){const D=b.value.id;D&&n.deleteCoupon(D).then(()=>{N(h,{message:"Il coupon è stato eliminato",error:!1}),d.updateSidebar(!1),A()}).catch(C=>{q(h,C)})},Y=async function(D,C){l.value.limit_to_user&&(l.value.limit_to_user_id=l.value.limit_to_user.id);const j=Object.assign({},l.value);j.code=D.code,j.amount=D.amount,l.value.id?no(j):io(j)},lo=async function(){var D;(D=document.getElementById("btn-submit"))==null||D.click()},io=async function(D){await n.createCoupon(D).then(C=>{N(h,{message:"Coupon aggiunto con successo",error:!1}),d.updateSidebar(!1),A()}).catch(C=>{q(h,C)})},no=async function(D){await n.updateCoupon(D).then(C=>{N(h,{message:"Coupon aggiornato con successo",error:!1}),d.updateSidebar(!1),A()}).catch(C=>{q(h,C)})},ao=D=>{const C=new Map;C.set("search",D.query),y(C)};return J(x,D=>{E()}),{items:t,tmp_coupon:l,filteredCoupons:e,allCoupons:S,schema:f,flag:v,couponStore:n,users:T,fetchAllCoupons:A,formatDataFromUnixTimestamps:so,formatNumber:W,formatDataFromSql:H,save:lo,onSubmit:Y,search:ao}},components:{InputTextWithValidation:oo,Form:X}};const de={key:0,class:"coupon"},re={class:"formgrid grid mt-3"},_e={class:"col-12 pl-0"},me={class:"flex top mt-1"},ue=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-coupon"})],-1),pe={class:"field col-11 mb-0"},he={class:"flex top mt-1"},fe=o("div",{class:"col-1"},null,-1),ve={class:"field col-11"},be=o("label",{for:"last_name"},"Tipologia",-1),ye={key:1,class:"m-0 capitalize"},ge={class:"flex top mt-1"},De=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-euro"})],-1),Se={key:1},xe={key:0,class:"m-0 field flex flex-column"},we=o("label",null," Importo",-1),ke={key:1,class:"m-0"},Ve={class:"flex top mt-1"},Ce=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-calendar"})],-1),Te={class:"field col-11"},Ue=o("label",{for:"calendar"},"Valido dal",-1),Ie={key:1},Ae={class:"flex top mt-1"},ze=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-calendar"})],-1),Le={class:"field col-11"},Oe=o("label",{for:"calendar"},"Al",-1),Fe={key:1},Ne={key:0,class:"flex top mt-1"},qe=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-ticket"})],-1),Be={class:"field col-11 flex flex-column"},Me=o("label",{for:"quantity"},"Numero totale coupon",-1),Ee={key:1,class:"flex top mt-1"},je=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-ticket"})],-1),$e={class:"field col-11 flex flex-column"},Re=o("label",{for:"quantity_per_user"},"Numero coupon utilizzabili per singolo utente",-1),Pe={key:2,class:"flex top mt-1"},Ye=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-user"})],-1),He={class:"field col-11"},We=o("label",{for:"limit_to_user_id"},"Coupon valido per l'utente",-1),Ge={key:1,class:"m-0"};function Je(s,t,l,e,v,h){const n=_("InputTextWithValidation"),u=_("Dropdown"),d=_("Calendar"),c=_("InputText"),f=_("AutoComplete"),p=_("Button"),S=_("Form");return e.tmp_coupon?(i(),a("div",de,[m(S,{"validation-schema":e.schema,class:"flex flex-column",onSubmit:e.onSubmit},{default:O(()=>{var x;return[o("div",re,[o("div",_e,[o("div",me,[ue,o("div",pe,[m(n,{name:"code",label:"Codice*",modelValue:e.tmp_coupon.code,class:"w-full",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"])])]),o("div",he,[fe,o("div",ve,[be,l.detail?(i(),a("p",ye,[o("span",null,r(e.tmp_coupon.typology||"-"),1),o("div",{class:F(["circle",e.tmp_coupon.typology])},null,2)])):(i(),I(u,{key:0,id:"last_name",modelValue:e.tmp_coupon.typology,"onUpdate:modelValue":t[0]||(t[0]=b=>e.tmp_coupon.typology=b),options:e.couponStore.couponsTypology,optionLabel:"name",optionValue:"value",class:"w-full capitalize"},null,8,["modelValue","options"]))])]),o("div",ge,[De,o("div",{class:F(["field col-11",{"mb-0":!l.detail}])},[l.detail?(i(),a("div",Se,[e.tmp_coupon.amount?(i(),a("p",xe,[we,z(" "+r(e.formatNumber(+e.tmp_coupon.amount)+"")+" € ",1)])):(i(),a("p",ke,"-"))])):(i(),I(n,{key:0,name:"amount",label:"Importo*",modelValue:e.tmp_coupon.amount,class:"w-full",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"]))],2)]),o("div",Ve,[Ce,o("div",Te,[Ue,l.detail?(i(),a("div",Ie,[o("span",null,r(e.tmp_coupon.valid_from||"-"),1)])):(i(),I(d,{key:0,inputId:"calendar",modelValue:e.tmp_coupon.valid_from,"onUpdate:modelValue":t[1]||(t[1]=b=>e.tmp_coupon.valid_from=b),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:"gg/mm/aaaa"},null,8,["modelValue"]))])]),o("div",Ae,[ze,o("div",Le,[Oe,l.detail?(i(),a("div",Fe,[o("span",null,r(e.tmp_coupon.valid_to||"-"),1)])):(i(),I(d,{key:0,inputId:"calendar",modelValue:e.tmp_coupon.valid_to,"onUpdate:modelValue":t[2]||(t[2]=b=>e.tmp_coupon.valid_to=b),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:"gg/mm/aaaa"},null,8,["modelValue"]))])]),e.tmp_coupon.typology=="promo"?(i(),a("div",Ne,[qe,o("div",Be,[Me,m(c,{id:"quantity",modelValue:e.tmp_coupon.quantity,"onUpdate:modelValue":t[3]||(t[3]=b=>e.tmp_coupon.quantity=b),type:"number",min:"1"},null,8,["modelValue"])])])):k("",!0),e.tmp_coupon.typology=="promo"?(i(),a("div",Ee,[je,o("div",$e,[Re,m(c,{id:"quantity_per_user",modelValue:e.tmp_coupon.quantity_per_user,"onUpdate:modelValue":t[4]||(t[4]=b=>e.tmp_coupon.quantity_per_user=b),type:"number",min:"1"},null,8,["modelValue"])])])):k("",!0),e.tmp_coupon.typology=="rimborso"?(i(),a("div",Pe,[Ye,o("div",He,[We,l.detail?(i(),a("p",Ge,r(((x=e.tmp_coupon.limit_to_user)==null?void 0:x.email)||"-"),1)):(i(),I(f,{key:0,modelValue:e.tmp_coupon.limit_to_user,"onUpdate:modelValue":t[5]||(t[5]=b=>e.tmp_coupon.limit_to_user=b),suggestions:e.users,optionLabel:"email",optionValue:"id",onComplete:e.search,class:"w-full"},null,8,["modelValue","suggestions","onComplete"]))])])):k("",!0)])]),m(p,{type:"submit",class:"hidden",id:"btn-submit",label:"Salva"})]}),_:1},8,["validation-schema","onSubmit"])])):k("",!0)}const Ke=L(ce,[["render",Je]]),Qe={props:["order_id","detail"],setup(s){B(()=>{s.order_id&&S(s.order_id)});const t=g([{label:""}]),l=g({}),e=g(),v=g(!0);R();const h=K(),n=bo(),u=M(),d=P(),c=Q({company:$().required()}),f=w(()=>n.getCurrentOrder),p=w(()=>n.allOrders);w(()=>u.submitDialog),w(()=>n.getCurrentOrder);const S=async function(y){n.fetchOrderDetail(y).then(()=>{b()}).catch(U=>{})},x=async function(){const y=new Map;await n.fetchAllOrders(y).catch(U=>{})},b=function(){l.value=Object.assign({},f.value)},T=function(){if(l.value.amount&&l.value.discount_amount){let y=parseFloat(l.value.amount)-parseFloat(l.value.discount_amount);return y>0?W(y):0}},V=async function(){if(l.value.invoice_number){let y={id:l.value.id+"",invoice_number:l.value.invoice_number};A(y)}},A=async function(y){await n.updateInvoiceNumber(y).then(()=>{N(h,{message:"Numero fattura aggiornato con successo",error:!1}),d.updateSidebar(!1),x()}).catch(U=>{q(h,U)})};return{items:t,tmp_order:l,filteredOrders:e,allOrders:p,schema:c,flag:v,fetchAllOrders:x,formatDataFromUnixTimestamps:so,translateTypology:fo,getTotal:T,formatNumber:W,save:V}},components:{InputTextWithValidation:oo,Form:X}};const Xe={key:0,class:"order"},Ze={class:"formgrid grid mt-3"},ot={class:"col-12 pl-0"},et={class:"flex top mt-1"},tt=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-calendar"})],-1),st={class:"field col-11"},lt=o("label",null,"Data ordine",-1),it={key:0,class:"m-0"},nt={key:1,class:"m-0"},at={class:"col-12 pl-0"},ct={class:"flex top mt-1"},dt=o("div",{class:"col-1"},null,-1),rt={class:"field col-11"},_t=o("label",null,"Tipologia",-1),mt=o("br",null,null,-1),ut={key:0,class:"m-0"},pt={key:1},ht={class:"col-12 pl-0"},ft={class:"flex top mt-1"},vt=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-user"})],-1),bt={class:"field col-11"},yt=o("label",null,"Utente",-1),gt={class:"m-0"},Dt={class:"col-12 pl-0"},St={class:"flex top mt-1"},xt=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-building"})],-1),wt={class:"col-11 flex justify-content-between align-items-center"},kt={class:"field"},Vt=o("label",null,"Area di lavoro",-1),Ct=o("br",null,null,-1),Tt={key:0},Ut={key:1,class:"m-0"},It={class:"col-12 pl-0"},At={class:"flex top mt-1"},zt=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-ticket"})],-1),Lt={class:"field col-11"},Ot=o("label",null,"Coupon",-1),Ft={key:0,class:"m-0 capitalize"},Nt={key:1,class:"m-0"},qt=mo('<div class="col-12 pl-0 mb-1"><div class="flex top mt-1"><div class="col-1"><i class="mt-1 pi pi-money-bill"></i></div><div class="field col-11 mb-0"><label>Dettaglio pagamento:</label></div></div></div>',1),Bt={class:"ml-5"},Mt={class:"col-12 p-0"},Et={class:"flex top mt-1"},jt=o("div",{class:"col-5"},[o("label",null,"Totale:")],-1),$t={class:"col-7"},Rt={key:0,class:"ml-2"},Pt={class:"col-12 p-0"},Yt={class:"flex top mt-1"},Ht=o("div",{class:"col-5"},[o("label",null,"Sconto coupon:")],-1),Wt={class:"col-7"},Gt={key:0,class:"ml-2"},Jt={class:"col-12 p-0"},Kt={class:"flex top mt-1"},Qt=o("div",{class:"col-5"},[o("label",null,"Totale pagato:")],-1),Xt={class:"col-7"},Zt={class:"ml-2 font-bold"},os={class:"col-12 pl-0 mt-4"},es={class:"flex top mt-1"},ts=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-credit-card"})],-1),ss={class:"field col-11"},ls=o("label",null,"Metodo di pagamento",-1),is={class:"m-0"},ns={key:0},as={key:1,class:"capitalize"},cs={key:0,class:"col-12 pl-0"},ds={class:"flex top mt-1"},rs=o("div",{class:"col-1"},null,-1),_s={class:"field col-11"},ms=o("label",null,"ID pagamento",-1),us={class:"m-0"},ps={key:0},hs={key:1},fs={key:1,class:"col-12 pl-0"},vs={class:"flex top mt-1"},bs=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-file"})],-1),ys={class:"field col-11"},gs=o("label",null,"Fattura",-1),Ds={class:"m-0 line-height-3"},Ss=o("br",null,null,-1),xs=o("br",null,null,-1),ws=o("br",null,null,-1),ks=o("br",null,null,-1),Vs=o("br",null,null,-1),Cs={key:2,class:"col-12 pl-0"},Ts={class:"flex top mt-1"},Us=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-file"})],-1),Is={class:"field col-11"},As=o("label",null,"Scontrino fiscale",-1),zs={class:"m-0 line-height-3"},Ls=o("br",null,null,-1),Os=o("br",null,null,-1),Fs=o("br",null,null,-1),Ns=o("br",null,null,-1),qs={key:3,class:"col-12 pl-0 mt-1"},Bs={class:"flex top mt-1"},Ms=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-file"})],-1),Es={class:"field col-11 flex flex-column"},js=o("label",{for:"invoice_number"},"Numero fattura",-1),$s={key:4,class:"col-12 pl-0 mt-1"},Rs={class:"flex top mt-1"},Ps=o("div",{class:"col-1"},[o("i",{class:"mt-1 pi pi-link"})],-1),Ys={class:"field col-11 flex flex-column underline"},Hs=["href"],Ws=["href"];function Gs(s,t,l,e,v,h){var u,d,c,f,p,S,x,b,T,V,A,y,U,E;const n=_("InputText");return e.tmp_order?(i(),a("div",Xe,[o("div",Ze,[o("div",ot,[o("div",et,[tt,o("div",st,[lt,e.tmp_order.created_at?(i(),a("p",it,r(e.formatDataFromUnixTimestamps(e.tmp_order.created_at)),1)):(i(),a("p",nt,"-"))])]),o("div",at,[o("div",ct,[dt,o("div",rt,[_t,mt,e.tmp_order.typology?(i(),a("span",ut,r(e.translateTypology(e.tmp_order.typology)),1)):(i(),a("span",pt,"-"))])]),o("div",ht,[o("div",ft,[vt,o("div",bt,[yt,o("p",gt,r(((u=e.tmp_order.user)==null?void 0:u.email)||"-"),1)])])]),o("div",Dt,[o("div",St,[xt,o("div",wt,[o("div",kt,[Vt,Ct,e.tmp_order.workarea?(i(),a("span",Tt,r(e.tmp_order.workarea.name),1)):(i(),a("p",Ut,"-"))]),o("div",{class:F(["circle",(c=(d=e.tmp_order)==null?void 0:d.workarea)==null?void 0:c.typology])},null,2)])])]),o("div",It,[o("div",At,[zt,o("div",Lt,[Ot,e.tmp_order.coupon_code?(i(),a("p",Ft,r(e.tmp_order.coupon_code),1)):(i(),a("p",Nt,"-"))])])]),qt,o("div",Bt,[o("div",Mt,[o("div",Et,[jt,o("div",$t,[e.tmp_order.amount?(i(),a("span",Rt," € "+r(e.formatNumber(+e.tmp_order.amount)),1)):k("",!0)])])]),o("div",Pt,[o("div",Yt,[Ht,o("div",Wt,[e.tmp_order.discount_amount?(i(),a("span",Gt," € "+r(e.formatNumber(+e.tmp_order.discount_amount)),1)):k("",!0)])])]),o("div",Jt,[o("div",Kt,[Qt,o("div",Xt,[o("span",Zt,"€ "+r(e.getTotal()),1)])])])]),o("div",os,[o("div",es,[ts,o("div",ss,[ls,o("p",is,[e.tmp_order.payment_method=="credit_card"?(i(),a("span",ns,"Carta di credito ")):(i(),a("span",as,r(e.tmp_order.payment_method||"-"),1))])])])]),e.tmp_order.payment_method&&(e.tmp_order.payment_method=="stripe"||e.tmp_order.payment_method=="satispay")?(i(),a("div",cs,[o("div",ds,[rs,o("div",_s,[ms,o("p",us,[e.tmp_order.payment_method=="stripe"?(i(),a("span",ps,r(e.tmp_order.stripe_payment_intent_id||"-"),1)):(i(),a("span",hs,r(e.tmp_order.payment_id||"-"),1))])])])])):k("",!0),(f=e.tmp_order.invoice_data)!=null&&f.company_name?(i(),a("div",fs,[o("div",vs,[bs,o("div",ys,[gs,o("p",Ds,[z(r((p=e.tmp_order.invoice_data)==null?void 0:p.company_name)+" ",1),Ss,z(" "+r((S=e.tmp_order.invoice_data)==null?void 0:S.company_vat),1),xs,z(" "+r((x=e.tmp_order.invoice_data)==null?void 0:x.company_address),1),ws,z(" "+r((b=e.tmp_order.invoice_data)==null?void 0:b.company_email),1),ks,z(" "+r((T=e.tmp_order.invoice_data)==null?void 0:T.company_sdi),1),Vs])])])])):(i(),a("div",Cs,[o("div",Ts,[Us,o("div",Is,[As,o("p",zs,[z(r((V=e.tmp_order.invoice_data)==null?void 0:V.person_fullname)+" ",1),Ls,z(" "+r((A=e.tmp_order.invoice_data)==null?void 0:A.person_fiscal_code),1),Os,z(" "+r((y=e.tmp_order.invoice_data)==null?void 0:y.person_address),1),Fs,z(" "+r((U=e.tmp_order.invoice_data)==null?void 0:U.person_email),1),Ns])])])])),(E=e.tmp_order.invoice_data)!=null&&E.company_name?(i(),a("div",qs,[o("div",Bs,[Ms,o("div",Es,[js,m(n,{id:"invoice_number",modelValue:e.tmp_order.invoice_number,"onUpdate:modelValue":t[0]||(t[0]=Y=>e.tmp_order.invoice_number=Y),type:"text",placeholder:l.detail?"-":""},null,8,["modelValue","placeholder"])])])])):k("",!0),e.tmp_order.invoice?(i(),a("div",$s,[o("div",Rs,[Ps,o("div",Ys,[o("a",{href:e.tmp_order.invoice.invoice_url,target:"_blank"},"Link Fatture in Cloud",8,Hs),o("a",{href:e.tmp_order.invoice.fic_pdf_url,target:"_blank",class:"mt-3"},"Guarda fattura",8,Ws)])])])):k("",!0)])])])])):k("",!0)}const Js=L(Qe,[["render",Gs]]),Ks={props:["type"],setup(){const s=g(),t=g(),l=g(),e=P(),v=M(),h=Z(),n=w(()=>e.showSidebar);w(()=>h.getCurrentUser);const u=function(x){e.setShowDetail(x)},d=function(){e.updateSidebar(!1)},c=function(){e.detailType=="user"?s.value.save():e.detailType=="coupon"?t.value.save():e.detailType=="order"&&l.value.save()},f=function(){let x="Vuoi disiscrivere l’utente da <b>Travaj</b>?<br>Ricordati di annullare tutte le prenotazioni attive dell’utente.";v.setDialog("Disiscrivi l'utente","Conferma","Annulla",x),v.setDynamicDialogVisibility(!0)},p=function(){let x="Sei sicuro di voler eliminare questo coupon?";v.setDialog("Elimina coupon","Conferma","Annulla",x),v.setDynamicDialogVisibility(!0)};return{showSidebar:n,sidebarStore:e,userDetailView:s,couponDetailView:t,orderDetailView:l,toggleEdit:u,closeSidebar:d,saveData:c,callDelete:function(){e.detailType=="user"?f():e.detailType=="coupon"&&p()}}},components:{UserDetailView:ae,CouponDetailView:Ke,OrderDetailView:Js}},Qs={class:"flex align-items-center justify-content-between"},Xs={class:"m-0"},Zs={key:0,class:"flex align-items-center"},ol=o("span",{class:"pi pi-pencil"},null,-1),el=[ol],tl=o("span",{class:"pi pi-trash"},null,-1),sl=[tl],ll=o("span",{class:"pi pi-times"},null,-1),il=[ll],nl={key:1,class:"flex align-items-center"};function al(s,t,l,e,v,h){const n=_("Button"),u=_("UserDetailView"),d=_("CouponDetailView"),c=_("OrderDetailView"),f=_("Sidebar"),p=uo("tooltip");return i(),I(f,{visible:e.showSidebar,"onUpdate:visible":t[5]||(t[5]=S=>e.showSidebar=S),position:"right",class:"w-full md:w-20rem lg:w-30rem",showCloseIcon:!1,dismissable:!0},{header:O(()=>[o("div",Qs,[o("h2",Xs,r(e.sidebarStore.title),1),e.sidebarStore.showDetail?(i(),a("div",nl,[m(n,{label:"Annulla",text:"",rounded:"",class:"mr-3",size:"small",onClick:t[3]||(t[3]=S=>e.toggleEdit(!1))}),m(n,{label:"Salva",outlined:"",rounded:"",size:"small",onClick:t[4]||(t[4]=S=>e.saveData())})])):(i(),a("div",Zs,[!e.sidebarStore.showDetail&&e.sidebarStore.detailType!="user"&&e.sidebarStore.detailType!="order"?eo((i(),a("button",{key:0,class:"p-sidebar-icon p-link mr-2",onClick:t[0]||(t[0]=S=>e.toggleEdit(!0))},el)),[[p,"Modifica",void 0,{top:!0}]]):k("",!0),!e.sidebarStore.showDetail&&e.sidebarStore.detailType!="order"?eo((i(),a("button",{key:1,class:"p-sidebar-icon p-link mr-2",onClick:t[1]||(t[1]=S=>e.callDelete())},sl)),[[p,"Elimina",void 0,{top:!0}]]):k("",!0),o("button",{class:"p-sidebar-icon p-link mr-2",onClick:t[2]||(t[2]=S=>e.closeSidebar())},il)]))])]),default:O(()=>[e.sidebarStore.detailType=="user"?(i(),I(u,{key:0,user_id:e.sidebarStore.typeId,class:F({detail:!e.sidebarStore.showDetail}),detail:!e.sidebarStore.showDetail,ref:"userDetailView"},null,8,["user_id","class","detail"])):k("",!0),e.sidebarStore.detailType=="coupon"?(i(),I(d,{key:1,coupon_id:e.sidebarStore.typeId,class:F({detail:!e.sidebarStore.showDetail}),detail:!e.sidebarStore.showDetail,ref:"couponDetailView"},null,8,["coupon_id","class","detail"])):k("",!0),e.sidebarStore.detailType=="order"?(i(),I(c,{key:2,order_id:e.sidebarStore.typeId,class:F({detail:!e.sidebarStore.showDetail}),detail:!e.sidebarStore.showDetail,ref:"orderDetailView"},null,8,["order_id","class","detail"])):k("",!0)]),_:1},8,["visible"])}const cl=L(Ks,[["render",al]]),dl=G({setup(){B(()=>{t.value="0.0.70"});const s=to(),t=g();return{loggedIn:w(()=>s.loggedIn),appVersion:t}}}),rl={key:0,class:"footer py-1 px-3 text-right"};function _l(s,t,l,e,v,h){return s.loggedIn?(i(),a("div",rl," v."+r(s.appVersion),1)):k("",!0)}const ml=L(dl,[["render",_l]]),ul={setup(){const s=M(),t=w(()=>s.showDynamicDialog),l=function(v){s.setDynamicDialogVisibility(v)};return{visible:t,toggleVisibility:l,dynamicDialogStore:s,onSubmit:function(){s.setBtnSubmit(!0),l(!1)}}}};const pl={class:"flex justify-content-between align-items-center w-full"},hl={class:"m-0"},fl=["innerHTML"];function vl(s,t,l,e,v,h){const n=_("Button"),u=_("Dialog");return e.dynamicDialogStore?(i(),I(u,{key:0,visible:e.visible,"onUpdate:visible":t[3]||(t[3]=d=>e.visible=d),modal:"",header:e.dynamicDialogStore._title,closable:!1,style:{width:"30vw"},class:"custom-dialog"},{header:O(()=>[o("div",pl,[o("h2",hl,r(e.dynamicDialogStore._title),1),m(n,{rounded:"",icon:"pi pi-times",onClick:t[0]||(t[0]=d=>e.toggleVisibility(!1)),text:""})])]),footer:O(()=>[m(n,{label:e.dynamicDialogStore._btnNoLabel,onClick:t[1]||(t[1]=d=>e.toggleVisibility(!1)),outlined:"",rounded:"",size:"small"},null,8,["label"]),m(n,{label:e.dynamicDialogStore._btnYesLabel,onClick:t[2]||(t[2]=d=>e.onSubmit()),autofocus:"",outlined:"",rounded:"",size:"small"},null,8,["label"])]),default:O(()=>[o("div",{innerHTML:e.dynamicDialogStore._message,class:"mt-3 line-height-3"},null,8,fl)]),_:1},8,["visible","header"])):k("",!0)}const bl=L(ul,[["render",vl]]),yl=G({setup(){},components:{TopbarMenu:Io,RightSidebar:cl,Footer:ml,DynamicDialog:bl}});const gl={class:"flex"},Dl={class:"col-12 p-0"},Sl={class:"w-full wrapper-content pb-6"},xl={class:"min-h-full pt-0 container pt-3"};function wl(s,t,l,e,v,h){const n=_("TopbarMenu"),u=_("RouterView"),d=_("RightSidebar"),c=_("Toast"),f=_("Footer"),p=_("DynamicDialog");return i(),a(po,null,[o("div",gl,[o("div",Dl,[m(n),o("div",Sl,[o("div",xl,[m(u),m(d)])])]),m(c,{position:"top-right"})]),m(f),m(p)],64)}const Ll=L(yl,[["render",wl]]);export{Ll as default};

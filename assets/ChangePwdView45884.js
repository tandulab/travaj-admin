import{d as b,u as g,a as v,c as C,_ as y,r as n,b as L,e as x,f as o,w,g as d}from"../index45884.js";import{L as P}from"./Logo45884.js";import{_ as V}from"./PasswordWithValidation.vue_vue_type_style_index_0_lang45884.js";import{c as $,a as u,b as S,F as B}from"./vee-validate.esm45884.js";import{s as F,a as k,h as c,e as f}from"./helpers45884.js";const U=b({name:"ChangePwdView",setup(){const s=g(),r=v(),p=$({password:u().required("La password è obbligatoria").min(8,"La password deve essere di almeno 8 caratteri"),password_confirmation:u().oneOf([S("password")],"Le password devono corrispondere").required("La conferma password è obbligatoria")}),e=C(()=>s.user),l=async function(a,t){F();const i={id:e.value.id,user:{password_confirmation:a.password_confirmation,password:a.password}};await s.changePassword(i).then(async()=>{k(r,{message:"Password aggiornata correttamente",error:!1}),c(),_()}).catch(m=>{c(),f(r,m)})};async function _(){const a={email:e.value.email,password:e.value.password};await s.login(a).then(async()=>{c()}).catch(t=>{c(),f(r,t)})}return{schema:p,currentUser:e,onSubmit:l}},components:{Logo:P,PasswordWithValidation:V,Form:B}});const W={class:"flex justify-content-center align-items-center mt-4 sm:h-screen sm:mt-0 login"},q={class:"m-2 text-center"},N=d("h1",{class:"mb-3 mt-0 text-center"},"Cambia la password",-1),T=d("p",{class:"font-normal mb-4"}," Inserisci una nuova password di minimo 8 caratteri ",-1);function j(s,r,p,e,l,_){const a=n("Logo"),t=n("PasswordWithValidation"),i=n("Button"),m=n("Form"),h=n("Card");return L(),x("div",W,[o(h,{class:"py-4 px-3"},{content:w(()=>[d("div",q,[o(a)]),N,T,o(m,{"validation-schema":s.schema,onSubmit:s.onSubmit,class:"flex flex-column"},{default:w(()=>[o(t,{name:"password",label:"Password*",type:"password"}),o(t,{name:"password_confirmation",label:"Conferma password*",type:"password"}),o(i,{label:"Conferma password",type:"submit",class:"mt-5 mb-3"})]),_:1},8,["validation-schema","onSubmit"])]),_:1})])}const D=y(U,[["render",j]]);export{D as default};
